services:
  cache.bloomfilter:
    class: Drupal\Core\Cache\CacheBackendInterface
    tags:
      - { name: cache.bin }
    factory: cache_factory:get
    arguments: [bloomfilter]

  bloomfiltercache.page:
    class: Drupal\bloomfiltercache\Cache\BloomFilterCacheDecorator
    arguments: ['@bloomfiltercache.page.inner', '@cache.bloomfilter', '@datetime.time', '@lock', 'page', {size: 10000, lifetime: 86400}]
    decorates: cache.page
    tags:
      - { name: needs_destruction }
